<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>21-å·¥å…·æ¼«è°ˆï¼šç¼–è¯‘ã€æ ¼å¼åŒ–ã€ä»£ç æ£€æŸ¥ã€æ’é”™å„æ˜¾èº«æ‰‹</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>21-å·¥å…·æ¼«è°ˆï¼šç¼–è¯‘ã€æ ¼å¼åŒ–ã€ä»£ç æ£€æŸ¥ã€æ’é”™å„æ˜¾èº«æ‰‹</h1>
<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚</p><p>ç°ä»£ C++ è¯­è¨€ï¼Œæˆ‘ä»¬è®²åˆ°è¿™é‡Œå°±å‘Šä¸€æ®µè½äº†ã€‚ä»Šå¤©æˆ‘ä»¬æ­£å¼å¼€å¯äº†å®æˆ˜ç¯‡ï¼Œå…ˆè®²ä¸€ä¸ªè½»æ¾äº›çš„è¯é¢˜â€”â€”å·¥å…·ã€‚</p><h2>ç¼–è¯‘å™¨</h2><p>å½“ç„¶ï¼Œè½»æ¾ä¸ç­‰äºä¸é‡è¦ã€‚æ¯•ç«Ÿï¼Œå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚æˆ‘ä»¬åš C++ å¼€å‘ï¼Œæœ€åŸºæœ¬çš„å·¥å…·å°±æ˜¯ç¼–è¯‘å™¨ï¼Œå¯¹å…¶æœ‰äº›äº†è§£æ˜¾ç„¶ä¹Ÿæ˜¯å¿…è¦çš„ã€‚æˆ‘ä»¬å°±å…ˆæ¥çœ‹çœ‹æˆ‘åœ¨ä¸“æ å¼€å¤´å°±æåˆ°çš„ä¸‰ç§ç¼–è¯‘å™¨ï¼ŒMSVC <span class="orange">[1]</span>ã€GCC <span class="orange">[2]</span> å’Œ Clang <span class="orange">[3]</span>ã€‚</p><h3>MSVC</h3><p>ä¸‰ç§ç¼–è¯‘å™¨é‡Œæœ€è€èµ„æ ¼çš„å°±æ˜¯ MSVC äº†ã€‚æ®å¾®è½¯å‘˜å·¥åœ¨ 2015 å¹´çš„ä¸€ç¯‡åšå®¢ï¼Œåœ¨ MSVC çš„ä»£ç é‡Œè¿˜èƒ½æ‰¾åˆ° 1982 å¹´å†™ä¸‹çš„æ³¨é‡Š <span class="orange">[4]</span>ã€‚è¿™æ„å‘³ç€ MSVC æ˜¯æœ€å†å²æ‚ ä¹…ã€æœ€æˆç†Ÿï¼Œä½†ä¹Ÿæ˜¯æœ€æœ‰å†å²åŒ…è¢±çš„ç¼–è¯‘å™¨ã€‚</p><p>å¾®è½¯çš„ç¼–è¯‘å™¨åœ¨ä¼ ç»Ÿä»£ç çš„ä¼˜åŒ–æ–¹é¢åšå¾—ä¸€ç›´ä¸é”™ï¼Œä½†å¯¹æ¨¡æ¿çš„æ”¯æŒåˆ™æ˜¯å®ƒçš„è½¯è‚‹ï¼Œåœ¨ Visual Studio 2015 ä¹‹å‰å°¤å…¶ä¸è¡Œâ€”â€”ä¹‹å‰æ¨¡æ¿é—®é¢˜æ•°é‡å·¨å¤§ï¼Œä¹‹åå°±å¥½å¤šäº†ã€‚è€Œ 2018 å¹´ 11 æœˆ MSVC å®£å¸ƒç»ˆäºèƒ½å¤Ÿç¼–è¯‘ range-v3 åº“ï¼Œä¹Ÿæˆäº†ä¸€ä»¶å€¼å¾—åº†è´ºçš„äº‹ <span class="orange">[5]</span>ã€‚å½“ç„¶ï¼Œè¿™ä»¶äº‹æƒ…æ˜¯å€¼å¾—é«˜å…´çš„ï¼Œä½†è€ƒè™‘æˆ‘åœ¨ 2016 å¹´çš„æ¼”è®²é‡Œå°±å·²ç»ç”¨åˆ°äº† range-v3ï¼Œä¸èƒ½ä¸è§‰å¾—è¿˜æ˜¯æœ‰ç‚¹æ™šäº†ã€‚æ­¤å¤–ï¼Œæˆ‘å·²ç»æè¿‡ï¼Œå¾®è½¯å¯¹ä»£ç çš„â€œå®¹å¿åº¦â€ä¸€ç›´æœ‰ç‚¹å¤ªé«˜ï¼ˆç¼ºçœæƒ…å†µä¸‹ï¼Œä¸ä½¿ç”¨ <code>/Za</code> é€‰é¡¹ï¼‰ï¼Œèƒ½æ¥å— C++ æ ‡å‡†è®¤ä¸ºéæ³•çš„ä»£ç ï¼Œè¿™è‡³å°‘å¯¹å†™è·¨å¹³å°çš„ä»£ç è€Œè¨€ï¼Œç»ä¸æ˜¯ä¸€ä»¶å¥½äº‹ã€‚</p><!-- [[[read_end]]] --><p>MSVC å½“ç„¶ä¹Ÿæœ‰é¢†å…ˆçš„åœ°æ–¹ã€‚å®ƒå¯¹æ ‡å‡†åº“çš„å®ç°ä¸€ç›´ä¸ç®—æ…¢ï¼Œè¾ƒæ—©å°±æä¾›äº†æ¯”è¾ƒå¥å£®çš„çº¿ç¨‹ï¼ˆ<a href="https://time.geekbang.org/column/article/186689">[ç¬¬ 19 è®²]</a>ã€<a href="https://time.geekbang.org/column/article/186708">[ç¬¬ 20 è®²]</a>ï¼‰ã€æ­£åˆ™è¡¨è¾¾å¼ï¼ˆ<span class="orange">[6]</span>ï¼‰ç­‰æ ‡å‡†åº“ã€‚åœ¨å¹¶å‘ <span class="orange">[7]</span> æ–¹é¢ï¼Œå¾®è½¯ä¹Ÿæ˜¯æ¯”è¾ƒé¢†å…ˆçš„ï¼Œå¹¶ä¸»å¯¼äº†åç¨‹çš„æŠ€æœ¯è§„æ ¼ä¹¦ <span class="orange">[8]</span>ã€‚å¾®è½¯ä¸€å¼€å§‹æ”¯æŒ C++ æ ‡å‡†çš„é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œä½†æ…¢æ…¢åœ°ï¼Œå¾®è½¯å·²ç»æŠŠå…¨é¢æ”¯æŒ C++ æ ‡å‡†å½“ä½œäº†ç›®æ ‡ï¼Œå¹¶åœ¨ 2018 å¹´å®£å¸ƒå·²å…¨é¢æ”¯æŒ C++17 æ ‡å‡†ï¼›è™½ç„¶åŒæ—¶ä¹Ÿæ‰¿è®¤ä»æœ‰ä¸€äº›é‡å¤§é—®é¢˜å½±å“äº†å…¶ç¼–è¯‘ä¸€äº›é‡è¦çš„å¼€æº C++ é¡¹ç›® <span class="orange">[9]</span>ã€‚</p><p>MSVC æœ‰ä¸€ä¸ªåœ°æ–¹æˆ‘ä¸€ç›´æ¯”è¾ƒå–œæ¬¢ï¼Œå°±æ˜¯ä»£ç é‡Œå¯ä»¥å†™å‡ºè¦æ±‚é“¾æ¥å…·ä½“ä»€ä¹ˆåº“ï¼Œè€Œé“¾æ¥ä»€ä¹ˆåº“çš„å‘½ä»¤ï¼Œå¯ä»¥æ˜¯ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹ä»£ç é‡Œç›´æ¥ç»™å‡ºçš„ã€‚è¿™å°±ä½¿å¾—åœ¨å‘½ä»¤è¡Œä¸Šç¼–è¯‘ä½¿ç”¨åˆ°ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ Boostï¼‰çš„ä»£ç å˜å¾—éå¸¸å®¹æ˜“ã€‚åœ¨ä½¿ç”¨ GCC å’Œ Clang æ—¶ï¼Œç”¨åˆ°ä»€ä¹ˆåº“ï¼Œå°±å¿…é¡»åœ¨å‘½ä»¤è¡Œä¸Šå†™å‡ºæ¥ï¼Œè¿™å°±è¿«ä½¿ç¨‹åºå‘˜ä½¿ç”¨æ›´è§„èŒƒã€ä¹Ÿæ›´éº»çƒ¦çš„ç®¡ç†æ–¹å¼äº†ã€‚å…·ä½“è€Œè¨€ï¼Œå¯¹äºä¸‹é¢çš„è¿™ä¸ªæœ€å°çš„å•å…ƒæµ‹è¯•ç¨‹åºï¼š</p><pre><code class="language-c++">#define BOOST_TEST_MAIN
#include &lt;boost/test/unit_test.hpp&gt;

BOOST_AUTO_TEST_CASE(minimal_test)
{
  BOOST_CHECK(1 + 1 == 2);
}
</code></pre><p>ä½¿ç”¨ GCC æˆ– Clang æ—¶ä½ éœ€è¦è¾“å…¥ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„å‘½ä»¤ï¼š</p><blockquote>
<p><code>g++ -DBOOST_TEST_DYN_LINK test.cpp -lboost_unit_test_framework</code></p>
</blockquote><p>è€Œ Windows ä¸‹ä½¿ç”¨ MSVC ä½ åªéœ€è¦è¾“å…¥ï¼š</p><blockquote>
<p><code>cl /DBOOST_TEST_DYN_LINK /EHsc /MD test.cpp</code></p>
</blockquote><p>ä¸€ä¸‹å­å°±ç®€å•å¤šäº†ã€‚</p><p>å¦å¤–ï¼Œåœ¨å…è´¹çš„ C++ é›†æˆå¼€å‘ç¯å¢ƒé‡Œï¼ŒVisual Studio Community Edition ææ€•å¯ä»¥ç®—æ˜¯æœ€å¥½çš„äº†ï¼Œè‡³å°‘åœ¨ Windows ä¸Šæ˜¯è¿™æ ·ã€‚åœ¨è‡ªåŠ¨å®ŒæˆåŠŸèƒ½å’Œè°ƒè¯•åŠŸèƒ½ä¸Š Visual Studio åšå¾—ç‰¹åˆ«å¥½ï¼Œä¸ºå…¶ä»–çš„å…è´¹å·¥å…·æ‰€ä¸åŠã€‚å¦‚æœä½ å¼€å‘çš„ C++ ç¨‹åºä¸»è¦åœ¨ Windows ä¸Šè¿è¡Œï¼Œé‚£ MSVC å°±åº”è¯¥æ˜¯é¦–é€‰äº†ã€‚</p><h3>Clang</h3><p>ç›¸åï¼Œåœ¨ä¸‰ä¸ªç¼–è¯‘å™¨é‡Œï¼Œæœ€æ–°çš„å°±æ˜¯ Clangã€‚ä½œä¸º LLVM é¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒçš„æœ€æ—©å‘å¸ƒæ˜¯åœ¨ 2007 å¹´ï¼Œç„¶åæµè¡Œç¨‹åº¦ä¸€è·¯é£™å‡ï¼Œåˆ°ç°åœ¨æˆäº†ä¸€ä¸ªé€šç”¨çš„è·¨å¹³å°ç¼–è¯‘å™¨ã€‚å…¶ä¸­æœ‰ä¸å°‘è‹¹æœçš„æ”¯æŒâ€”â€”å› ä¸ºè‹¹æœå¯¹ GCC çš„è®¸å¯è¦æ±‚ä¸æ»¡æ„ï¼Œè‹¹æœæŠŠ LLVM å¼€å‘è€… Chris Lattner æ‹›è‡´éº¾ä¸‹ï¼ˆ2005â€”2017ï¼‰ï¼ŒæœŸé—´ä»–é™¤äº†ä¸ºè‹¹æœè®¾è®¡å¼€å‘äº†å…¨æ–°çš„è¯­è¨€ Swiftï¼ŒClang çš„ C++ æ”¯æŒä¹Ÿå¾—åˆ°äº†é£é€Ÿçš„å‘å±•ã€‚</p><p>ä½œä¸ºåæ¥è€…ï¼ŒClang åœ¨é”™è¯¯ä¿¡æ¯æ˜“ç”¨æ€§ä¸Šåšå‡ºäº†æå¤§çš„æ”¹å–„ã€‚Clang è™½ç„¶ä¸€ç›´åœ¨æ¨¡æ‹Ÿ GCC çš„åŠŸèƒ½å’Œå‘½ä»¤è¡Œï¼Œä½†é”™è¯¯ä¿¡æ¯çš„å‹å¥½æ€§æ˜¯å®ƒçš„æœ€å¤§äº®ç‚¹ã€‚åœ¨è¯­è¨€å±‚é¢ï¼ŒClang å¯¹ C++ æ ‡å‡†çš„æ”¯æŒä¹Ÿæ˜¯é£é€Ÿï¼Œæ­£å¦‚ä¸‹é¢è¿™å¼ å›¾æ‰€å±•ç¤ºçš„é‚£æ ·ï¼ˆ<span class="orange">[10]</span>ï¼‰ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/a6/71/a6432b0cbdc5ad6965402800f2057971.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒClang åœ¨ 2011 å¼‚å†›çªèµ·ï¼Œå¯¹ C++11 çš„æ”¯æŒç¨‹åº¦åœ¨çŸ­æ—¶é—´ç”šè‡³è¿˜è¶…è¿‡äº†åŸå…ˆçš„é¢†è·‘è€… GCCã€‚ç”±äº Clang/LLVM çš„æ¨¡å—åŒ–è®¾è®¡ï¼Œåœ¨ Clang ä¸Šæ‰©å±•æ–°åŠŸèƒ½ç›¸å½“å®¹æ˜“ï¼›è€Œä¸”åŠ¨æ€åº“ libclang ç›´æ¥å‘å¼€å‘è€…æš´éœ²äº†åˆ†æ C++ ä»£ç çš„æ¥å£ï¼Œè¿™ä¹Ÿæ˜¯ Clang æµè¡Œçš„ä¸€ä¸ªä¸»è¦åŸå› ã€‚</p><p>å³ä½¿åœ¨æˆ‘ä¸»è¦ä½¿ç”¨ Windows å·¥ä½œçš„æ—¶å€™ï¼Œæˆ‘åœ¨æœºå™¨ä¸Šä¹Ÿè£…äº† Clangã€‚æˆ‘ä¸»è¦ä¸æ˜¯ç”¨å®ƒç¼–è¯‘ï¼Œè€Œæ˜¯åˆ©ç”¨å®ƒå¯¹ C++ çš„ç†è§£ï¼Œåšä»£ç çš„æ ¼å¼åŒ–ï¼ˆæœ¬è®²ä¸‹é¢ä¼šè®²ï¼‰å’Œè‡ªåŠ¨å®Œæˆâ€”â€”å¯¹äºæ–‡ä»¶æ•°ä¸å¤šçš„é¡¹ç›®ï¼Œæˆ‘è¿˜æ˜¯å–œæ¬¢ä½¿ç”¨ Vim <span class="orange">[11]</span>ï¼Œé‚£æœºå™¨ä¸Šèƒ½ä¸èƒ½ç”¨ clang_complete <span class="orange">[12]</span> åŒºåˆ«å°±å¾ˆå¤§äº†ã€‚æœ‰äº† clang_completeï¼Œé‚£ Vim é‡Œä¹Ÿå°±æœ‰ä¸ªä¸ç®—å¤ªç¬¨çš„ C++ è‡ªåŠ¨å®Œæˆå¼•æ“äº†ã€‚é¡¾åæ€ä¹‰ï¼Œclang_complete ä¸»è¦ä¾èµ–çš„å°±æ˜¯ Clang äº†ï¼Œæ›´ç²¾ç¡®åœ°è¯´ï¼Œæ˜¯ libclangã€‚</p><p>å¦å¤–ï¼Œå½“æˆ‘å†™å‡ºåœ¨ MSVC ä¸‹ç¼–è¯‘ä¸è¿‡çš„ä»£ç æ—¶ï¼Œæˆ‘ä¹Ÿä¼šçœ‹çœ‹ä»£ç èƒ½ä¸èƒ½åœ¨ Clang ä¸‹é€šè¿‡ã€‚å¦‚æœèƒ½è¿‡ï¼Œé‚£æˆ‘å°±æ¯”è¾ƒæœ‰ä¿¡å¿ƒï¼Œæˆ‘å†™å‡ºçš„ä»£ç æ˜¯æ­£ç¡®çš„ï¼Œåªä¸è¿‡æ˜¯ MSVC å¤„ç†ä¸äº†è€Œå·²ğŸ˜ˆã€‚</p><p>Clang ç›®å‰åœ¨ macOS ä¸‹æ˜¯é»˜è®¤çš„ C/C++ ç¼–è¯‘å™¨ã€‚åœ¨ Linux å’Œ Windows ä¸‹å½“ç„¶ä¹Ÿéƒ½èƒ½å®‰è£…ï¼šè¿™ç§æƒ…å†µä¸‹ï¼ŒClang ä¼šä½¿ç”¨å¹³å°ä¸Šçš„ä¸»æµ C++ åº“ï¼Œä¹Ÿå°±æ˜¯åœ¨ Linux ä¸Šä½¿ç”¨ libstdc++ï¼Œåœ¨ Windows ä¸Šä½¿ç”¨ MSVC çš„ C++ è¿è¡Œæ—¶ã€‚åªæœ‰åœ¨ macOS ä¸Šï¼ŒClang æ‰ä¼šä½¿ç”¨å…¶åŸç”Ÿ C++ åº“ï¼Œlibc++ <span class="orange">[13]</span>ã€‚é¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœä½ æƒ³é˜…è¯»ä¸€ä¸‹ç°ä»£ C++ æ ‡å‡†åº“çš„å‚è€ƒå®ç°çš„è¯ï¼Œlibc++ æ˜¯å¯è¯»æ€§æœ€å¥½çš„â€”â€”ä¸è¿‡ï¼Œä»»ä½•ä¸€ä¸ªè½¯ä»¶äº§å“çš„æºä»£ç éƒ½ä¸æ˜¯ä»¥å¯è¯»æ€§ä¸ºç¬¬ä¸€è€ƒé‡ï¼Œæ¯”èµ·æ•™ç§‘ä¹¦ã€ä¸“æ é‡Œçš„ä»£ç ä¾‹å­ï¼Œlibc++ è‚¯å®šæ˜¯è¦å¤æ‚å¤šäº†ã€‚</p><p>æœ€åä¸€ä¸ªå…³äºç‰ˆæœ¬å·çš„è¯´æ˜ï¼šè‹¹æœå¼€å‘å·¥å…·é‡Œå¸¦çš„ Clang çš„æ˜¯è‹¹æœè‡ªå·±ç»´æŠ¤çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œç‰ˆæœ¬å·å’Œè‹¹æœçš„ Xcode å¼€å‘å·¥å…·ç‰ˆæœ¬å·ä¸€è‡´ï¼Œå’Œå¼€æºé¡¹ç›® Clang çš„ç‰ˆæœ¬å·æ²¡æœ‰å…³ç³»ï¼Œæ˜¾å¾—æ¯”è¾ƒä¹±ã€‚ç›®å‰ Apple Clang çš„æœ€æ–°ç‰ˆæœ¬æ˜¯ 11 äº†ï¼Œä½†åŠŸèƒ½ä¸Šè½åäºå®˜æ–¹çš„ LLVM Clang 9.0 <span class="orange">[14]</span>ã€‚è¦æƒ³ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ Clangï¼Œæœ€æ–¹ä¾¿çš„æ–¹å¼æ˜¯ä½¿ç”¨ Homebrew <span class="orange">[15]</span> å®‰è£… llvmï¼š</p><blockquote>
<p><code>brew install llvm</code></p>
</blockquote><p>å®‰è£…å®Œä¹‹åï¼Œæ–°çš„ clang å’Œ clang++ å·¥å…·åœ¨ /usr/local/opt/llvm/bin ç›®å½•ä¸‹ï¼Œå’Œç³»ç»ŸåŸæœ‰çš„å‘½ä»¤ä¸ä¼šå‘ç”Ÿå†²çªã€‚ä½ å¦‚æœéœ€è¦ä½¿ç”¨æ–°çš„å·¥å…·çš„è¯ï¼Œéœ€è¦æ”¹å˜è·¯å¾„çš„é¡ºåºï¼Œæˆ–è€…è‡ªå·±åˆ›å»ºå‘½ä»¤çš„åˆ«åï¼ˆaliasï¼‰ã€‚</p><h3>GCC</h3><p>GCC çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å‘å¸ƒäº 1987 å¹´ï¼Œæ˜¯ç”±è‡ªç”±è½¯ä»¶è¿åŠ¨çš„å‘èµ·äºº Richard Stallmanï¼ˆå¸¸å¸¸è¢«ç¼©å†™ä¸º RMSï¼‰äº²è‡ªå†™çš„ã€‚å› è€Œï¼Œä»è¯ç”Ÿä¼Šå§‹ï¼ŒGCC å°±å¸¦ç€å¾ˆå¼ºçš„æ„è¯†å½¢æ€ï¼Œæ‰¿æ‹…ç€æŒ¯å…´è‡ªç”±è½¯ä»¶çš„ä»»åŠ¡ã€‚åœ¨ GNU/Linux å¹³å°ä¸Šï¼ŒGCC è‡ªç„¶æ˜¯é¦–é€‰çš„ç¼–è¯‘å™¨ã€‚è‡ªç”±è½¯ä»¶çš„å¼€å‘è€…ï¼Œå¤§éƒ¨åˆ†ä¹Ÿé€‰æ‹©äº† GCCã€‚ç”±äº GCC æ˜¯ç”¨ GPL å‘å¸ƒçš„ï¼Œä»»ä½•å¯¹ GCC çš„ä¿®æ”¹éƒ½å¿…é¡»ä»¥ GPL åè®®å‘å¸ƒã€‚è¿™å°±è¿«ä½¿æƒ³ä¿®æ”¹ GCC çš„äººè¦ä¸º GCC åšå‡ºè´¡çŒ®ã€‚è¿™å¯¹è‡ªç”±è½¯ä»¶å½“ç„¶æ˜¯ä»¶å¥½äº‹ï¼Œä½†å¯¹ä¸€å®¶å…¬å¸æ¥è®²å°±æœªå¿…äº†ã€‚æ­¤å¤–ï¼Œä½ æƒ³æ‹†å‡º GCC çš„ä¸€éƒ¨åˆ†æ¥åšå…¶ä»–äº‹æƒ…ï¼Œæ¯”å¦‚å¯¹ä»£ç è¿›è¡Œåˆ†æï¼Œä¹Ÿç»ä¸æ˜¯ä»¶å®¹æ˜“çš„äº‹ã€‚è¿™äº›é—®é¢˜ï¼Œå®é™…ä¸Šå°±æ˜¯è¿«ä½¿è‹¹æœå…¬å¸åœ¨ LLVM/Clang ä¸ŠæŠ•èµ„çš„åŠ¨æœºäº†ã€‚</p><p>ä½œä¸ºåº”ç”¨æœ€å¹¿çš„è‡ªç”±è½¯ä»¶ä¹‹ä¸€ï¼ŒGCC æ— ç–‘æ˜¯éå¸¸æˆç†Ÿçš„è½¯ä»¶ã€‚æŸäº›å®éªŒæ€§çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å¯¹æ¦‚å¿µçš„æ”¯æŒï¼Œä¹Ÿæ˜¯æœ€æ—©åœ¨ GCC ä¸Šé¢å‡ºç°çš„ã€‚å¯¹ C++ æ ‡å‡†çš„æ”¯æŒï¼ŒGCC ä¸€ç›´è·Ÿå¾—éå¸¸ç´§ï¼Œä½†æ˜¯ï¼Œç”±äºè‡ªç”±è½¯ä»¶ä¾é å¿—æ„¿è€…çš„å·¥ä½œï¼Œè€Œéé¡¹ç›®ç»ç†æˆ–äº§å“ç»ç†çš„ç®¡ç†ï¼Œå¯¹ä¸åŒåŠŸèƒ½çš„ä¼˜å…ˆçº§è·Ÿå•†ä¸šäº§å“å¾€å¾€ä¸åŒï¼Œä¹Ÿé€ å°±äº† GCC å’Œ MSVC ä¸Šå„æœ‰ä¸åŒçš„ç€é‡ç‚¹ï¼Œä¼˜åŒ–ç¼–è¯‘ç»“æœå“ªä¸ªæ€§èƒ½æ›´é«˜ä¹Ÿä¼šä¾èµ–äºå…·ä½“çš„ç¨‹åºã€‚å½“ç„¶ GCC æ˜¯è·¨å¹³å°çš„ï¼Œè¿™ç‚¹ä¸Šè‚¯å®šæ˜¯ MSVC ä¸åŠçš„ã€‚æ ¹æ® GCC çš„æ–¹å¼å†™å‡ºçš„ä»£ç ï¼Œè·¨å¹³å°æ€§å°±ä¼šæ›´å¥½ã€‚ç›®å‰æˆ‘å·²çŸ¥çš„æœ€ä¸»è¦ä¾‹å¤–æ˜¯ç»ˆç«¯ä¸Šçš„å¤šè¯­è¨€æ”¯æŒï¼šç”±äº GCC åœ¨ Windows ä¸Šä½¿ç”¨äº† MSVC çš„ä¸€ä¸ªè¿‡æ—¶çš„è¿è¡Œåº“ MSVCRT.DLLï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ GCC è¦åœ¨ç»ˆç«¯ä¸Šæ˜¾ç¤ºä¸­æ–‡ç»å¸¸ä¼šå‡ºç°é—®é¢˜ <span class="orange">[16]</span>ã€‚</p><p>åˆæœŸ GCC åœ¨å‡ºé”™ä¿¡æ¯çš„å‹å¥½ç¨‹åº¦ä¸Šä¸€ç›´åšå¾—ä¸å¤ªå¥½ã€‚ä½† Clang çš„å‡ºç°åˆºæ¿€å‡ºäº†ä¸€ç§å’Œ GCC ä¹‹é—´çš„è‰¯æ€§ç«äº‰ï¼Œåˆ°ä»Šå¤©ï¼ŒGCC çš„é”™è¯¯ä¿¡æ¯åè€Œæ˜¯æœ€å‹å¥½çš„äº†ã€‚æˆ‘å¦‚æœé‡åˆ°ç¨‹åºç¼–è¯‘å‡ºé”™åœ¨ Clang é‡Œçœ‹ä¸æ˜ç™½çš„è¯ï¼Œæˆ‘ä¼šè¯•ç€ç”¨ GCC å†ç¼–è¯‘çœ‹çœ‹ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½ GCC çš„å‡ºé”™ä¿¡æ¯ä¼šæ›´è®©äººæ˜ç™½ä¸€äº›ã€‚</p><p>åœ¨å¯é¢„è§çš„å°†æ¥ï¼Œåœ¨è‡ªç”±/å¼€æºè½¯ä»¶çš„å¼€å‘ä¸Šï¼ŒGCC ä¸€ç›´ä¼šæ˜¯ç¼–è¯‘å™¨çš„æ ‡å‡†ã€‚</p><h2>æ ¼å¼åŒ–å·¥å…·</h2><h3>Clang-Format</h3><p>æˆ‘ä¸Šé¢æåˆ°äº† Clang æœ‰ç€éå¸¸æ¨¡å—åŒ–çš„è®¾è®¡ï¼Œå®¹æ˜“è¢«å…¶ä»–å·¥å…·å¤ç”¨å…¶ä»£ç åˆ†æåŠŸèƒ½ã€‚LLVM å›¢é˜Ÿè‡ªå·±ä¹Ÿæä¾›ä¸€äº›å·¥å…·ï¼Œå…¶ä¸­æˆ‘ä¸ªäººæœ€å¸¸ç”¨çš„å°±æ˜¯ Clang-Format <span class="orange">[17]</span>ã€‚</p><p>åœ¨ä½¿ç”¨ Clang-Format ä¹‹å‰ï¼Œæˆ‘ä¹Ÿä½¿ç”¨è¿‡ä¸€äº›å…¶ä»–çš„æ ¼å¼åŒ–å·¥å…·ã€‚å®ƒä»¬å’Œ Clang-Format çš„æœ€å¤§åŒºåˆ«æ˜¯ï¼Œå®ƒä»¬ä¸ç†è§£ C++ ä»£ç ï¼Œåœ¨å¯¹ä»˜ç®€å•çš„ C ä»£ç æ—¶è¿˜è¡Œï¼Œé‡åˆ°å¤æ‚çš„ C++ ä»£ç æ—¶å°±å¾ˆå®¹æ˜“å‡ºé—®é¢˜ã€‚æ­¤å¤–ï¼ŒClang-Format è¿˜å¾ˆæ™ºèƒ½ï¼Œå¯ä»¥åƒäººä¸€æ ·ï¼Œæ ¹æ®å…·ä½“æƒ…å†µå’Œå‰©ä½™ç©ºé—´æ¥æ ¼å¼åŒ–ï¼Œæ¯”å¦‚ï¼š</p><pre><code class="language-c++">void func(int arg1, int arg2,
          int arg3);

void long_func_name(int arg1,
                    int arg2,
                    int arg3);

void a_very_long_func_name(
  int arg1, int arg2, int arg3);
</code></pre><p>æ­¤å¤–ï¼Œå®ƒä¹Ÿæä¾›äº†å®Œå–„çš„é…ç½®é¡¹ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦æ¥è¿›è¡Œé…ç½®ï¼Œå¦‚è¿™æ˜¯æˆ‘çš„ä¸€ä¸ªé¡¹ç›®ä½¿ç”¨çš„æ ¼å¼åŒ–é€‰é¡¹ï¼š</p><p><a href="https://github.com/adah1972/nvwa/blob/master/.clang-format">https://github.com/adah1972/nvwa/blob/master/.clang-format</a></p><p>C++ é¡¹ç›®é‡Œæ”¾ä¸Šè¿™æ ·ä¸€ä¸ªæ–‡ä»¶ï¼Œä»£ç çš„æ ¼å¼åŒ–é—®é¢˜å¤§å®¶å°±ä¸ç”¨çäº‰äº†â€”â€”å¤§å®¶ç¡®å®šè¿™ä¸ªæ–‡ä»¶çš„å†…å®¹å°±è¡Œã€‚</p><p>ç›®å‰è¿™ä¸ªä¸“æ çš„ä»£ç æ ¼å¼åŒ–é€‰é¡¹ä¹Ÿå’Œä¸Šé¢çš„ç±»ä¼¼ï¼Œæœ€ä¸»è¦çš„åŒºåˆ«å°±æ˜¯è¡Œé•¿é™åˆ¶ï¼ˆColumnLimitï¼‰è®¾æˆäº† 36ï¼Œç¼©è¿›å®½åº¦ï¼ˆIndentWidthï¼‰ç­‰é€‰é¡¹åŸºæœ¬å‡åŠï¼Œæ¥é€‚é…æ‰‹æœºçš„å°æ˜¾ç¤ºå±ã€‚å¦‚æœæ²¡æœ‰ Clang-Formatï¼Œåšä»£ç çš„å°å±é€‚é…å°±ä¼šç´¯å¤šäº†ã€‚</p><h2>ä»£ç æ£€æŸ¥å·¥å…·</h2><h3>Clang-Tidy</h3><p>Clang é¡¹ç›®ä¹Ÿæä¾›äº†å…¶ä»–ä¸€äº›å·¥å…·ï¼ŒåŒ…æ‹¬ä»£ç çš„é™æ€æ£€æŸ¥å·¥å…· Clang-Tidy <span class="orange">[18]</span>ã€‚è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå…¨é¢çš„å·¥å…·ï¼Œå®ƒé™¤äº†ä¼šæç¤ºä½ å±é™©çš„ç”¨æ³•ï¼Œä¹Ÿä¼šå‘Šè¯‰ä½ å¦‚ä½•å»ç°ä»£åŒ–ä½ çš„ä»£ç ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒClang-Tidy åªåšåŸºæœ¬çš„åˆ†æã€‚ä½ ä¹Ÿå¯ä»¥å‘Šè¯‰å®ƒä½ æƒ³ç°ä»£åŒ–ä½ çš„ä»£ç å’Œæé«˜ä»£ç çš„å¯è¯»æ€§ï¼š</p><blockquote>
<p><code>clang-tidy --checks='clang-analyzer-*,modernize-*,readability-*' test.cpp</code></p>
</blockquote><p>ä»¥ä¸‹é¢ç®€å•ç¨‹åºä¸ºä¾‹ï¼š</p><pre><code class="language-c++">#include &lt;iostream&gt;
#include &lt;stddef.h&gt;

using namespace std;

int sqr(int x) { return x * x; }

int main()
{
  int a[5] = {1, 2, 3, 4, 5};
  int b[5];
  for (int i = 0; i &lt; 5; ++i) {
    b[i] = sqr(a[i]);
  }
  for (int i : b) {
    cout &lt;&lt; i &lt;&lt; endl;
  }
  char* ptr = NULL;
  *ptr = '\0';
}
</code></pre><p>Clang-Tidy ä¼šæŠ¥å‘Šä¸‹åˆ—é—®é¢˜ï¼š</p><ul>
<li>&lt;stddef.h&gt; åº”å½“æ›¿æ¢æˆ &lt;cstddef&gt;</li>
<li>å‡½æ•°å½¢å¼ <code>int func(â€¦)</code> åº”å½“ä¿®æ”¹æˆ <code>auto func(â€¦) -&gt; int</code></li>
<li>ä¸è¦ä½¿ç”¨ C æ•°ç»„ï¼Œåº”å½“æ”¹æˆ <code>std::array</code></li>
<li><code>5</code> æ˜¯é­”æœ¯æ•°ï¼Œåº”å½“æ”¹æˆå…·åå¸¸æ•°</li>
<li><code>NULL</code> åº”å½“æ”¹æˆ <code>nullptr</code></li>
</ul><p>å‰ä¸¤æ¡æˆ‘ä¸æƒ³å¬ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨é…ç½®æ–‡ä»¶æ¥å®šåˆ¶è¡Œä¸ºå°±å¿…è¦äº†ã€‚é…ç½®æ–‡ä»¶å« .clang-tidyï¼Œåº”å½“æ”¾åœ¨ä½ çš„ä»£ç ç›®å½•ä¸‹æˆ–è€…ä»£ç çš„ä¸€ä¸ªçˆ¶ç›®å½•ä¸‹ã€‚Clang-Tidy ä¼šä½¿ç”¨æœ€â€œè¿‘â€çš„é‚£ä¸ªé…ç½®æ–‡ä»¶ã€‚ä¸‹é¢çš„é…ç½®æ–‡ä»¶åæ˜ äº†æˆ‘çš„åå¥½ï¼š</p><pre><code class="language-yaml">Checks: 'clang-diagnostic-*,clang-analyzer-*,modernize-*,readability-*,-modernize-deprecated-headers,-modernize-use-trailing-return-type'
</code></pre><p>ä¸–ç•Œæ¸…é™å¤šäº†ï¼šæˆ‘ä¸æƒ³å¬åˆ°çš„å”åƒ§å¼çš„å•°å”£å°±æ¶ˆå¤±äº†ã€‚</p><p>ä½¿ç”¨ Clang-Tidy è¿˜éœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œé¢å¤–çš„å‘½ä»¤è¡Œå‚æ•°åº”å½“è·Ÿåœ¨å‘½ä»¤è¡Œæœ€åçš„ <code>--</code> åé¢ã€‚æ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬è¦æ‰«æä¸€ä¸ª C++ å¤´æ–‡ä»¶ foo.hï¼Œæˆ‘ä»¬å°±éœ€è¦æ˜ç¡®å‘Šè¯‰ Clang-Tidy è¿™æ˜¯ C++ æ–‡ä»¶ï¼ˆé»˜è®¤ .h æ˜¯ C æ–‡ä»¶ï¼‰ã€‚ç„¶åï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åŒ…å«çˆ¶ç›®å½•ä¸‹çš„ common ç›®å½•ï¼Œè¯­è¨€æ ‡å‡†ä½¿ç”¨äº† C++17ï¼Œå‘½ä»¤è¡Œå°±åº”è¯¥æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><blockquote>
<p><code>clang-tidy foo.h -- -x c++ -std=c++17 -I../common</code></p>
</blockquote><p>ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œä¸Šé¢ Clang-Tidy å®é™…ä¸Šæ¼æŠ¥å‘Šäº†äº›é—®é¢˜ï¼šå®ƒæŠ¥å‘Šäº†ä¸€äº›ä¸é‡è¦çš„é—®é¢˜ï¼Œå´æ¼è¿‡äº†çœŸæ­£ä¸¥é‡çš„é—®é¢˜ã€‚è¿™ä¼¼ä¹æ˜¯ä¸ªå®ç°ç›¸å…³çš„ç‰¹æ®Šé—®é¢˜ï¼Œå› ä¸ºå¦‚æœæŠŠå‰é¢é‚£äº›è¡Œåˆ æ‰çš„è¯ï¼Œåé¢ä¸¤è¡Œæœ‰é—®é¢˜çš„ä»£ç ä¹Ÿè¿˜æ˜¯ä¼šäº§ç”Ÿå‘Šè­¦çš„ã€‚</p><h3>Cppcheck</h3><p>Clang-Tidy è¿˜æ˜¯ä¸€ä¸ªæ¯”è¾ƒâ€œé‡â€çš„å·¥å…·ã€‚å®ƒéœ€è¦æœ‰ä¸€å®šçš„é…ç½®ï¼Œéœ€è¦èƒ½çœ‹åˆ°æ–‡ä»¶ç”¨åˆ°çš„å¤´æ–‡ä»¶ï¼Œè¿è¡Œçš„æ—¶é—´ä¹Ÿä¼šè¾ƒé•¿ã€‚è€Œ Cppcheck <span class="orange">[19]</span> å°±æ˜¯ä¸€ä¸ªéå¸¸è½»é‡çš„å·¥å…·äº†ã€‚å®ƒè¿è¡Œé€Ÿåº¦é£å¿«ï¼Œçœ‹ä¸åˆ°å¤´æ–‡ä»¶ã€ä¸éœ€è¦é…ç½®å°±èƒ½ä½¿ç”¨ã€‚å®ƒè·Ÿ Clang-Tidy çš„é‡ç‚¹ä¹Ÿä¸å¤ªä¸€æ ·ï¼šå®ƒå¼ºè°ƒçš„æ˜¯å‘ç°ä»£ç å¯èƒ½å‡ºé—®é¢˜çš„åœ°æ–¹ï¼Œè€Œä¸å¤ªç€é‡ä»£ç é£æ ¼é—®é¢˜ï¼Œä¸¤è€…åŠŸèƒ½å¹¶ä¸å®Œå…¨é‡å ã€‚æœ‰æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸¤ä¸ªå·¥å…·å¯ä»¥ä¸€èµ·ä½¿ç”¨ã€‚</p><p>ä»¥ä¸Šé¢çš„ä¾‹å­æ¥ä¸ºä¾‹ï¼ŒCppcheck ä¼šå¹²è„†åœ°æŠ¥å‘Šä»£ç ä¸­æœ€ä¸¥é‡çš„é—®é¢˜â€”â€”ç©ºæŒ‡é’ˆçš„è§£å¼•ç”¨ã€‚å®ƒçš„å¼€é”€å¾ˆä½ï¼Œå´èƒ½å‘ç°æ½œåœ¨çš„å®‰å…¨æ€§é—®é¢˜ï¼Œå› è€Œæˆ‘è§‰å¾—è¿™æ˜¯ä¸ªæ€§ä»·æ¯”å¾ˆé«˜çš„å·¥å…·ã€‚</p><h2>æ’é”™å·¥å…·</h2><p>æ’é”™å·¥å…·å½“ç„¶ä¹Ÿæœ‰å¾ˆå¤šç§ï¼Œæˆ‘ä»¬ä»Šå¤©ä»‹ç»å…¶ä¸­ä¸¤ä¸ªï¼ŒValgrind å’Œ nvwa::debug_newã€‚</p><h3>Valgrind</h3><p>Valgrind <span class="orange">[20]</span> ç®—æ˜¯ä¸€ä¸ªè€ç‰Œå·¥å…·äº†ã€‚å®ƒæ˜¯ä¸€ä¸ªéä¾µå…¥å¼çš„æ’é”™å·¥å…·ã€‚æ ¹æ® Valgrind çš„æ–‡æ¡£ï¼Œå®ƒä¼šå¯¼è‡´å¯æ‰§è¡Œæ–‡ä»¶çš„é€Ÿåº¦å‡æ…¢ 20 è‡³ 30 å€ã€‚ä½†å®ƒå¯ä»¥åœ¨ä¸æ”¹å˜å¯æ‰§è¡Œæ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œåªè¦æ±‚ä½ åœ¨ç¼–è¯‘æ—¶å¢åŠ äº§ç”Ÿè°ƒè¯•ä¿¡æ¯çš„å‘½ä»¤è¡Œå‚æ•°ï¼ˆ<code>-g</code>ï¼‰ï¼Œå³å¯æŸ¥å‡ºå†…å­˜ç›¸å…³çš„é”™è¯¯ã€‚</p><p>ä»¥ä¸‹é¢çš„ç®€å•ç¨‹åºä¸ºä¾‹ï¼š</p><pre><code class="language-c++">int main()
{
  char* ptr = new char[20];
}
</code></pre><p>åœ¨ Linux ä¸Šä½¿ç”¨ <code>g++ -g test.cpp</code>  ç¼–è¯‘ä¹‹åï¼Œç„¶åä½¿ç”¨ <code>valgrind --leak-check=full ./a.out</code> æ£€æŸ¥è¿è¡Œç»“æœï¼Œæˆ‘ä»¬å¾—åˆ°çš„è¾“å‡ºä¼šå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://static001.geekbang.org/resource/image/5c/50/5cb2060de012f04c4b30741c6e0deb50.png" alt=""></p><p>å³å…¶ä¸­åŒ…å«äº†å†…å­˜æ³„æ¼çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å†…å­˜æ˜¯ä»ä»€ä¹ˆåœ°æ–¹æ³„æ¼çš„ã€‚</p><p>Valgrind çš„åŠŸèƒ½å¹¶ä¸åªæ˜¯å†…å­˜æŸ¥é”™ï¼Œä¹ŸåŒ…å«äº†å¤šçº¿ç¨‹é—®é¢˜åˆ†æç­‰å…¶ä»–åŠŸèƒ½ã€‚è¦è¿›ä¸€æ­¥äº†è§£ç›¸å…³ä¿¡æ¯ï¼Œè¯·æŸ¥é˜…å…¶æ–‡æ¡£ã€‚</p><h3>nvwa::debug_new</h3><p>åœ¨ nvwa <span class="orange">[21]</span> é¡¹ç›®é‡Œï¼Œæˆ‘ä¹ŸåŒ…å«äº†ä¸€ä¸ªå¾ˆå°çš„å†…å­˜æ³„æ¼æ£€æŸ¥å·¥å…·ã€‚å®ƒçš„æœ€å¤§ä¼˜ç‚¹æ˜¯å°å·§ï¼Œå¹¶ä¸”å¯¹ç¨‹åºè¿è¡Œæ€§èƒ½å½±å“æå°ï¼›ç¼ºç‚¹ä¸»è¦æ˜¯ä¸åŠ Valgrind æ˜“ç”¨å’Œå¼ºå¤§ï¼Œåªèƒ½æ£€æŸ¥ <code>new</code> å¯¼è‡´çš„å†…å­˜æ³„æ¼ï¼Œå¹¶éœ€è¦ä¾µå…¥å¼åœ°å¯¹é¡¹ç›®åšä¿®æ”¹ã€‚</p><p>éœ€è¦æ£€æµ‹å†…å­˜æ³„æ¼æ—¶ï¼Œä½ éœ€è¦æŠŠ debug_new.cpp åŠ å…¥åˆ°é¡¹ç›®é‡Œã€‚æ¯”å¦‚ï¼Œå¯ä»¥ç®€å•åœ°åœ¨å‘½ä»¤è¡Œä¸ŠåŠ å…¥è¿™ä¸ªæ–‡ä»¶ï¼š</p><blockquote>
<p><code>c++ test.cpp \</code><br>
<code>../nvwa/nvwa/debug_new.cpp</code></p>
</blockquote><p>ä¸‹é¢æ˜¯å¯èƒ½çš„è¿è¡Œæ—¶æŠ¥é”™ï¼š</p><blockquote>
<p><code>Leaked object at 0x100302760 (size 20, 0x1000018a4)</code><br>
<code>*** 1 leaks found</code></p>
</blockquote><p>åœ¨ä½¿ç”¨ GCC å’Œ Clang æ—¶ï¼Œå¯ä»¥è®©å®ƒè‡ªåŠ¨å¸®ä½ æ‰¾å‡ºå†…å­˜æ³„æ¼ç‚¹çš„ä½ç½®ã€‚åœ¨å‘½ä»¤è¡Œä¸Šéœ€è¦åŠ å…¥å¯æ‰§è¡Œæ–‡ä»¶çš„åç§°ï¼Œå¹¶äº§ç”Ÿè°ƒè¯•ä¿¡æ¯ï¼š</p><blockquote>
<p><code>c++ -D_DEBUG_NEW_PROGNAME=\"a.out\" \</code><br>
<code>-g test.cpp \</code><br>
<code>../nvwa/nvwa/debug_new.cpp</code></p>
</blockquote><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨è¿è¡Œæ—¶çœ‹åˆ°ä¸€ä¸ªæ›´æ˜ç¡®çš„é”™è¯¯ï¼š</p><blockquote>
<p><code>Leaked object at 0x100302760 (size 20, main (in a.out) (test.cpp:3))</code><br>
<code>*** 1 leaks found</code></p>
</blockquote><p>è¿™ä¸ªå·¥å…·çš„å…¶ä»–ç”¨æ³•å¯ä»¥å‚è§æ–‡æ¡£ã€‚</p><h2>ç½‘é¡µå·¥å…·</h2><h3>Compiler Explorer</h3><p>ç¼–è¯‘å™¨éƒ½æœ‰è¾“å‡ºæ±‡ç¼–ä»£ç çš„åŠŸèƒ½ï¼šåœ¨ MSVC ä¸Šå¯ä½¿ç”¨ <code>/Fa</code>ï¼Œåœ¨ GCC å’Œ Clang ä¸Šå¯ä½¿ç”¨ <code>-S</code>ã€‚ä¸è¿‡ï¼Œè¦æŠŠæºä»£ç å’Œæ±‡ç¼–å¯¹åº”èµ·æ¥ï¼Œå°±éœ€è¦ä¸€å®šçš„åŠŸåŠ›äº†ã€‚åœ¨è¿™ç‚¹ä¸Šï¼Œgodbolt.org <span class="orange">[22]</span> å¯ä»¥æä¾›å¾ˆå¤§çš„å¸®åŠ©ã€‚å®ƒé…ç½®äº†å¤šä¸ªä¸åŒçš„ç¼–è¯‘å™¨ï¼Œå¯ä»¥è¿‡æ»¤æ‰ç¼–è¯‘å™¨äº§ç”Ÿçš„æ±‡ç¼–ä¸­å¼€å‘è€…ä¸€èˆ¬ä¸å…³å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶èƒ½å¤Ÿä½¿ç”¨é¢œè‰²å’Œæç¤ºæ¥å¸®åŠ©ä½ å…³è”æºä»£ç å’Œäº§ç”Ÿçš„æ±‡ç¼–ã€‚ä½¿ç”¨è¿™ä¸ªç½‘ç«™ï¼Œä½ ä¸ä»…å¯ä»¥å¿«é€ŸæŸ¥çœ‹ä½ çš„ä»£ç åœ¨ä¸åŒç¼–è¯‘å™¨é‡Œçš„ä¼˜åŒ–ç»“æœï¼Œè¿˜èƒ½å¿«é€Ÿåˆ†äº«ç»“æœã€‚æ¯”å¦‚ï¼Œä¸‹é¢è¿™ä¸ªé“¾æ¥ï¼Œå°±å¯ä»¥å±•ç¤ºæˆ‘ä»¬ä¹‹å‰è®²è¿‡çš„ä¸€ä¸ªæ¨¡æ¿å…ƒç¼–ç¨‹ä»£ç çš„ç¼–è¯‘ç»“æœï¼š</p><p><a href="https://godbolt.org/z/zPNEJ4">https://godbolt.org/z/zPNEJ4</a></p><p>ç½‘é¡µæˆªå›¾ç¤ºæ„å¦‚ä¸‹ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/e1/a2/e1f3f1f2125c6b0679fbf0752d30cda2.jpg" alt=""></p><p>å½“ç„¶ï¼Œä½œä¸ºä¸€ä¸ªç½‘ç«™ï¼Œgodbolt.org å¯¹ä»£ç çš„å¤æ‚åº¦æœ‰ä¸€å®šçš„é™åˆ¶ï¼Œä¹Ÿä¸èƒ½ä»»æ„ä½¿ç”¨ä½ åœ¨ä»£ç é‡Œç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“ï¼ˆä¸è¿‡ï¼Œå®ƒå·²ç»è£…äº†ä¸å°‘ä¸»æµçš„ C++ åº“ï¼Œå¦‚æˆ‘ä»¬åé¢ä¼šè®²åˆ°çš„ Boostã€Catch2ã€range-v3 å’Œ cppcoroï¼‰ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥åœ¨ä½ è‡ªå·±çš„æœºå™¨ä¸Šæœ¬åœ°å®‰è£…å®ƒèƒŒåçš„å¼•æ“ï¼Œcompiler-explorer <span class="orange">[23]</span>ã€‚å¦‚æœä½ çš„ä»£ç è¾ƒå¤æ‚ï¼Œæˆ–è€…æœ‰å®‰å…¨ã€éšç§æ–¹é¢çš„é¡¾è™‘çš„è¯ï¼Œå¯ä»¥è€ƒè™‘è¿™ä¸ªæ–¹æ¡ˆã€‚</p><h3>C++ Insights</h3><p>å¦‚æœä½ åœ¨ä¸Šé¢çš„é“¾æ¥é‡Œç‚¹å‡»äº†â€œCppInsightsâ€æŒ‰é’®çš„è¯ï¼Œä½ å°±ä¼šè·³è½¬åˆ° C++ Insights <span class="orange">[24]</span> ç½‘ç«™ï¼Œå¹¶ä¸”ä½ è´´åœ¨ godbolt.org çš„ä»£ç ä¹Ÿä¼šä¸€èµ·è¢«å¸¦è¿‡å»ã€‚è¿™ä¸ªç½‘ç«™æä¾›äº†å¦å¤–ä¸€ä¸ªç¼–è¯‘å™¨ç›®å‰æ²¡æœ‰æä¾›ã€ä½†ååˆ†æœ‰ç”¨çš„åŠŸèƒ½ï¼šå±•ç¤ºæ¨¡æ¿çš„å±•å¼€è¿‡ç¨‹ã€‚</p><p>å›æƒ³æˆ‘ä»¬åœ¨æ¨¡æ¿ç¼–ç¨‹æ—¶çš„ç—›è‹¦ä¹‹ä¸€æ¥è‡ªäºæˆ‘ä»¬éœ€è¦åœ¨è„‘å­ä¸­æƒ³è±¡æ¨¡æ¿æ˜¯å¦‚ä½•å±•å¼€çš„ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹éå¸¸å®¹æ˜“å‡ºé”™ã€‚å½“ç¼–è¯‘å™¨å‡ºé”™æ—¶ï¼Œæˆ‘ä»¬å¾—é€šè¿‡å†—é•¿çš„é”™è¯¯ä¿¡æ¯æ¥å¯»æ‰¾å‡ºé”™åŸå› çš„è››ä¸é©¬è¿¹ï¼›å½“ç¼–è¯‘å™¨æˆåŠŸç¼–è¯‘äº†ä¸€æ®µæˆ‘ä»¬ä¸é‚£ä¹ˆç†è§£çš„æ¨¡æ¿ä»£ç æ—¶ï¼Œæˆ‘ä»¬åœ¨æ„Ÿåˆ°åº†å¹¸çš„åŒæ—¶ï¼Œä¹Ÿå¾€å¾€ä¼šä»ç„¶å¾ˆå›°æƒ‘â€”â€”è€Œä½¿ç”¨è¿™ä¸ªç½‘ç«™ï¼Œä½ å°±å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ­£ç¡®å·¥ä½œçš„æ¨¡æ¿æ˜¯å¦‚ä½•å±•å¼€çš„ã€‚ä»¥ <a href="https://time.geekbang.org/column/article/185899">[ç¬¬ 18 è®²]</a> è®¨è®ºçš„ <code>make_index_sequence</code> ä¸ºä¾‹ï¼Œå¦‚æœä½ æŠŠä»£ç å®Œæ•´è¾“å…¥åˆ°ç½‘ç«™ä¸Šå»ã€ç„¶åå°è¯•å±•å¼€ <code>make_index_sequence&lt;5&gt;</code>ï¼Œä½ å°±ä¼šçœ‹åˆ° <code>index_sequence_helper</code> æ˜¯è¿™æ ·å±•å¼€çš„ï¼š</p><blockquote>
<p><code>index_sequence_helper&lt;5&gt;</code><br>
<code>index_sequence_helper&lt;4, 4&gt;</code><br>
<code>index_sequence_helper&lt;3, 3, 4&gt;</code><br>
<code>index_sequence_helper&lt;2, 2, 3, 4&gt;</code><br>
<code>index_sequence_helper&lt;1, 1, 2, 3, 4&gt;</code><br>
<code>index_sequence_helper&lt;0, 0, 1, 2, 3, 4&gt;</code></p>
</blockquote><p>å¦‚æœæˆ‘æ›´æ—©ä¸€ç‚¹çŸ¥é“è¿™ä¸ªå·¥å…·çš„è¯ï¼Œæˆ‘å°±ä¼šåœ¨è®²ç¼–è¯‘æœŸç¼–ç¨‹çš„æ—¶å€™ç›´æ¥å»ºè®®å¤§å®¶ç”¨äº†ï¼Œåº”è¯¥ä¼šæ›´æœ‰åŠ©äºæ¨¡æ¿çš„ç†è§£â€¦â€¦</p><h2>å†…å®¹å°ç»“</h2><p>åœ¨ä»Šå¤©è¿™ä¸€è®²ä¸­ï¼Œæˆ‘ä»¬å¯¹å„ä¸ªç¼–è¯‘å™¨å’Œä¸€äº›å¸¸ç”¨çš„å·¥å…·ä½œäº†ç®€å•çš„ä»‹ç»ã€‚ç”¨å¥½å·¥å…·ï¼Œå¯ä»¥å¤§å¤§æå‡ä½ çš„å¼€å‘æ•ˆç‡ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>å“ªäº›å·¥å…·ä½ è§‰å¾—æ¯”è¾ƒæœ‰ç”¨ï¼Ÿå“ªäº›å·¥å…·ä½ å·²ç»åœ¨ç”¨äº†ï¼ˆé™¤äº†ç¼–è¯‘å™¨ï¼‰ï¼Ÿä½ ä¸ªäººè¿˜ä¼šæ¨èå“ªäº›å·¥å…·ï¼Ÿ</p><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ã€‚</p><h2><span class="reference">å‚è€ƒèµ„æ–™</span></h2><p><span class="reference">[1] Visual Studio. <a href="https://visualstudio.microsoft.com/">https://visualstudio.microsoft.com/</a> </span></p><p><span class="reference">[2] GCC, the GNU Compiler Collection. <a href="https://gcc.gnu.org/">https://gcc.gnu.org/</a> </span></p><p><span class="reference">[3] Clang: a C language family frontend for LLVM. <a href="https://clang.llvm.org/">https://clang.llvm.org/</a> </span></p><p><span class="reference">[4] Jim Springfield,  â€œRejuvenating the Microsoft C/C++ compilerâ€. <a href="https://devblogs.microsoft.com/cppblog/rejuvenating-the-microsoft-cc-compiler/">https://devblogs.microsoft.com/cppblog/rejuvenating-the-microsoft-cc-compiler/</a> </span></p><p><span class="reference">[5] Casey Carter, â€œUse the official range-v3 with MSVC 2017 version 15.9â€. <a href="https://devblogs.microsoft.com/cppblog/use-the-official-range-v3-with-msvc-2017-version-15-9/">https://devblogs.microsoft.com/cppblog/use-the-official-range-v3-with-msvc-2017-version-15-9/</a> </span></p><p><span class="reference">[6] cppreference.com, â€œstd::regexâ€. <a href="https://en.cppreference.com/w/cpp/regex/basic_regex">https://en.cppreference.com/w/cpp/regex/basic_regex</a> </span></p><p><span class="reference">[7] Microsoft, â€œConcurrency Runtimeâ€. <a href="https://docs.microsoft.com/en-us/cpp/parallel/concrt/concurrency-runtime">https://docs.microsoft.com/en-us/cpp/parallel/concrt/concurrency-runtime</a> </span></p><p><span class="reference">[8] ISO/IEC JTC1 SC22 WG21, â€œProgramming languagesâ€”C++extensions for coroutinesâ€. <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4680.pdf">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4680.pdf</a> </span></p><p><span class="reference">[9] Ulzii Luvsanbat, â€œAnnouncing: MSVC conforms to the C++ standardâ€. <a href="https://devblogs.microsoft.com/cppblog/announcing-msvc-conforms-to-the-c-standard/">https://devblogs.microsoft.com/cppblog/announcing-msvc-conforms-to-the-c-standard/</a> </span></p><p><span class="reference">[10] Jonathan Adamczewski, â€œThe growth of modern C++ supportâ€. <a href="http://brnz.org/hbr/?p=1404">http://brnz.org/hbr/?p=1404</a> </span></p><p><span class="reference">[11] Vim Online. <a href="https://www.vim.org/">https://www.vim.org/</a> </span></p><p><span class="reference">[12] Xavier Deguillard, clang_complete. <a href="https://github.com/xavierd/clang_complete">https://github.com/xavierd/clang_complete</a> </span></p><p><span class="reference">[13] â€œlibc++â€ C++ Standard Library . <a href="https://libcxx.llvm.org/">https://libcxx.llvm.org/</a> </span></p><p><span class="reference">[14] cppreference.com, â€œC++ compiler supportâ€. <a href="https://en.cppreference.com/w/cpp/compiler_support">https://en.cppreference.com/w/cpp/compiler_support</a> </span></p><p><span class="reference">[15] Homebrew. <a href="https://brew.sh/">https://brew.sh/</a> </span></p><p><span class="reference">[16] å´å’ç‚œ, â€œMSVCRT.DLL console I/O bugâ€. <a href="https://yongweiwu.wordpress.com/2016/05/27/msvcrt-dll-console-io-bug/">https://yongweiwu.wordpress.com/2016/05/27/msvcrt-dll-console-io-bug/</a> </span></p><p><span class="reference">[17] ClangFormat. <a href="https://clang.llvm.org/docs/ClangFormat.html">https://clang.llvm.org/docs/ClangFormat.html</a> </span></p><p><span class="reference">[18] Clang-Tidy. <a href="https://clang.llvm.org/extra/clang-tidy/">https://clang.llvm.org/extra/clang-tidy/</a> </span></p><p><span class="reference">[19] Daniel MarjamÃ¤ki, Cppcheck. <a href="https://github.com/danmar/cppcheck">https://github.com/danmar/cppcheck</a> </span></p><p><span class="reference">[20] Valgrind Home. <a href="https://valgrind.org/">https://valgrind.org/</a> </span></p><p><span class="reference">[21] å´å’ç‚œ, nvwa. <a href="https://github.com/adah1972/nvwa/">https://github.com/adah1972/nvwa/</a> </span></p><p><span class="reference">[22] Matt Godbolt, â€œCompiler Explorerâ€. <a href="https://godbolt.org/">https://godbolt.org/</a> </span></p><p><span class="reference">[23] Matt Godbolt, compiler-explorer. <a href="https://github.com/mattgodbolt/compiler-explorer">https://github.com/mattgodbolt/compiler-explorer</a> </span></p><p><span class="reference">[24] Andreas Fertig, â€œC++ Insightsâ€. <a href="https://cppinsights.io/">https://cppinsights.io/</a> </span></p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            èŠ±æ™¨å°‘å¹´  2020-01-13 20:40:09
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            ä¸€ç›´åœ¨ubuntuç”¨clion+bazleè¿›è¡Œé¡¹ç›®ç¼–è¯‘ï¼Œæ„Ÿè§‰æŒºå¥½ç”¨çš„ï¼Œä½†æ˜¯macbookè¿™å¥—æ–¹æ¡ˆæ²¡æ³•ç”¨ï¼Œå¾ˆè›‹ç–¼ã€‚ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            ä¸‰å‘³  2020-01-13 11:25:15
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            cppä¸­ç¬¬ä¸‰æ–¹åº“çš„ç®¡ç†è¶…éº»çƒ¦ï¼Œx86æˆ–x64ï¼Œreleaseæˆ–debugï¼Œä»vc6åˆ°æœ€æ–°çš„vs2019ï¼Œwindowsä¸‹ç¬¬ä¸‰æ–¹åº“ç®¡ç†èµ·æ¥å¤ªéº»çƒ¦äº†ã€‚<br>é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰ä¸€ç§å¥½ç”¨çš„ç¬¬ä¸‰æ–¹åº“ç®¡ç†å‘¢ï¼Ÿ<br>å¦‚æœç”¨vs2015ä»¥ä¸Šï¼Œè¶…æ¨èä½¿ç”¨vcpkgå•Šï¼å°±è¿ç”Ÿæˆæ±‡ç¼–å‚è€ƒçš„é‚£ä¸ªç½‘é¡µå·¥å…·ï¼Œéƒ½å¤§å¤§å’§å’§çš„æ¨ªå¹…æ¨èvcpkgï¼Œå¥½ç”¨åˆ°çˆ†å•Šï¼<br>å¦‚ä½•ä½¿ç”¨ä¸å¤šè¯´äº†ï¼Œå¦‚ä½•å¥½ç”¨æä¸€ä¸‹ã€‚å‘½ä»¤è¡Œå®‰è£…å¯¹åº”çš„åº“ï¼Œå·¥å…·ä¼šè¿›è¡Œæ¼«é•¿çš„ç¼–è¯‘ã€‚è¦å¼•ç”¨è¿™ä¸ªåº“ï¼Œåªéœ€è¦#includeå¯¹åº”çš„å¤´æ–‡ä»¶ï¼Œlibåº“ä¼šè‡ªåŠ¨åŠ è½½ï¼Œdllä¼šåœ¨è¿è¡Œçš„æ—¶å€™æ‹·è´ã€‚å°±è¿™æ ·ã€‚ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;        line-height:1.2">ä½œè€…å›å¤2020-01-13 13:44:24</div>
    <div style="color:#353535;font-weight:400;white-space:normal;        word-break:break-all;line-height:1.6">åæ°”æ˜¯æŒºå“äº†ã€‚æˆ‘æ²¡æœ‰ä½¿ç”¨ç»éªŒâ€¦â€¦</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            å»–ç†ŠçŒ«  2020-01-13 09:08:17
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            çœ‹åˆ°C++ Insightsè¿™ä¸ªå·¥å…·äº†ï¼Œè·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹è¿™æ®µæ€»ç»“çš„å…³äºé€’å½’æ¨¡æ¿çš„å‡ ä¸ªå¿ƒå¾—å§ã€‚<br>æ ¹æ®è€å¸ˆè®²çš„è¿™å‡ ç§ï¼Œæˆ‘æŠŠè¿™å‡ ç§åˆ†ç±»æˆ: 1.æ•°å€¼ã€2.æ‹‰å–ã€3.æ‰“åŒ…ã€‚<br>1. æ•°å€¼å‹ï¼šæ“ä½œæ•°å€¼ï¼ˆä¸€èˆ¬æ˜¯å‡å»ï¼‰ï¼Œç„¶ååˆ°è¾¾ä¸€ä¸ªç»ˆæ­¢æ¡ä»¶ï¼ˆä¸€èˆ¬æ˜¯ç­‰äº0ï¼‰ï¼Œä¾‹å¦‚factorial<br>2. æ‹‰å–å‹ï¼šä»...ä¸­æ¯æ¬¡æ‹‰å–ä¸€ä¸ªæ•°å€¼è·Ÿç¬¬ä¸€ä¸ªå‚æ•°è¿›è¡Œæ“ä½œï¼Œåˆå¹¶æˆä¸€ä¸ªå‚æ•°ï¼Œç»§ç»­æ‹‰å–è¿‡ç¨‹ï¼Œç›´åˆ°åé¢...ä¸­çš„å‚æ•°è¢«ç”¨å…‰ï¼Œç»ˆæ­¢æ¡ä»¶å°±æ˜¯æŒ‡å‰©ä¸€ä¸ªå‚æ•°ï¼Œä¾‹å¦‚ï¼š sum<br>3. æ‰“åŒ…å‹ï¼š ä»ç¬¬ä¸€ä¸ªå‚æ•°ä¸­åˆ†ç¦»å‡ºä¸€ä¸ªå‚æ•°è¿›å…¥...å‚æ•°åŒ…ä¸­ï¼Œç„¶åç»§ç»­è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªå‚æ•°è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶ï¼Œä¾‹å¦‚: make_index_sequence<br>åªæ˜¯ä¸ªäººè§è§£ï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰ç‚¹å¸®åŠ©ã€‚ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;        line-height:1.2">ä½œè€…å›å¤2020-01-13 14:20:26</div>
    <div style="color:#353535;font-weight:400;white-space:normal;        word-break:break-all;line-height:1.6">æŒºå¥½ã€‚è¿™ç¡®å®æ˜¯æœ€å¸¸è§çš„å‡ ç§ç”¨æ³•ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            tt  2020-01-13 08:14:32
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            æ–‡æœ«æœ‰å½©è›‹å‘¦â€”â€”C++ Insights 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;        line-height:1.2">ä½œè€…å›å¤2020-01-13 09:58:38</div>
    <div style="color:#353535;font-weight:400;white-space:normal;        word-break:break-all;line-height:1.6">å—¯ï¼Œè¿™ä¸ªæ˜¯æœ€è¿‘å‘ç°çš„ï¼Œèµ¶å¿™è¡¥è¿›å·¥å…·ç¯‡ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            tt  2020-01-13 08:03:35
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            å—¯ï¼Œæˆ‘è¯´è€å¸ˆçš„ä»£ç æ€ä¹ˆæ˜¯æˆ‘è®¢é˜…çš„è¯¾ç¨‹é‡Œæ˜¾ç¤ºæœ€å‹å¥½çš„å‘¢ï¼ğŸ‘ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;        line-height:1.2">ä½œè€…å›å¤2020-01-13 09:58:05</div>
    <div style="color:#353535;font-weight:400;white-space:normal;        word-break:break-all;line-height:1.6">å·¥å…·å¾ˆé‡è¦ã€‚ğŸ˜</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;            line-height:1.2">
            Geek_71d4ac  2020-01-13 08:01:09
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;            word-break:break-all;line-height:1.6">
            æƒ³çŸ¥é“åœ¨vimä¸Šå†™C++ï¼Œæœ‰æ²¡æœ‰æ¯”è¾ƒå¥½çš„æ’ä»¶æ¨èï¼Œè°¢è°¢ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;        line-height:1.2">ä½œè€…å›å¤2020-01-13 13:48:24</div>
    <div style="color:#353535;font-weight:400;white-space:normal;        word-break:break-all;line-height:1.6">çœ‹æˆ‘çš„ Vim é…ç½®ï¼Œæˆ‘ç”¨åˆ°çš„è¿™äº›å’Œ C++ å¼€å‘æœ‰å…³ï¼š<br><br>clang_complete<br>nerdcommenterï¼ˆæ³¨é‡Šï¼‰<br>vim-fugitiveï¼ˆgitï¼‰<br>vim-gitgutterï¼ˆgitï¼‰<br>code_complete<br>echofunc<br><br>å¦å¤–ï¼Œæˆ‘åœ¨ .vimrc é‡ŒåŠ äº†ä¸‹é¢å‡ å¥æ¥é›†æˆ clang-formatï¼š<br><br>&quot; Key mappings to use clang-format<br>noremap  &lt;silent&gt; &lt;Tab&gt;      :pyxf &#47;usr&#47;local&#47;opt&#47;llvm&#47;share&#47;clang&#47;clang-format.py&lt;CR&gt;<br>inoremap &lt;silent&gt; &lt;C-F&gt; &lt;ESC&gt;:pyxf &#47;usr&#47;local&#47;opt&#47;llvm&#47;share&#47;clang&#47;clang-format.py&lt;CR&gt;i<br><br></div>
</div>
            
    </div>
</li>
            </ul>
</div>
</body>
</html>